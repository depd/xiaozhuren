"use strict";function insertCSSCode(t,e){var a=document.createElement("link");if(0==t.indexOf("http")||0==t.indexOf("/")){if(a.rel="stylesheet",a.type="text/css",a.href=t,e&&(a.onload=e,-1!=navigator.userAgent.indexOf("Safari")))var n=setInterval(function(){a.sheet&&(e(),clearInterval(n))},100)}else a=document.createElement("style"),a.type="text/css",a.media="screen",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t));document.getElementsByTagName("head")[0].appendChild(a)}function getLogParams(t){var e=$(t).closest("[id^=Topic]").attr("id")||"",a=$(t).closest(".tab").find("._header .active"),n=/[a-z]+(\d+)-[a-z]+(\d+)/i.exec(e);if(!n||!n[0])return{topicID:0,areaID:0};var o={topicID:n[1],areaID:n[2]};return a.length&&(o.tabname=a.text()),o}function hjLog(t,e){ht.sendCustomEvent(t,e)}!function(t,e,a){var n=Math.round(+new Date/864e5),o=/^https?:$/.test(location.protocol)&&location.protocol||"http:",i=function(t){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)},r=encodeURIComponent(document.referrer);if(window.ht&&window.ht.__bi&&"681f945a-080c-48c3-afad-a7775de88e27"===window.ht.__bi)return i(window.location.protocol+"//track.hujiang.com/event?siteid=1&p=redundance@"+t),void console.warn("oops, BI Track file [class.js] is included twice.");var c=window.ht||{};c.__bi="681f945a-080c-48c3-afad-a7775de88e27",c.__cache=[],c.sendEvent=function(){c.__cache.push(["sendEvent",arguments])},c.sendCustomEvent=function(){c.__cache.push(["sendCustomEvent",arguments])},c.sendAopEvent=function(){c.__cache.push(["sendAopEvent",arguments])},c.sendAopCustomEvent=function(){c.__cache.push(["sendAopCustomEvent",arguments])},c.sendTrack=function(){c.__cache.push(["sendTrack",arguments])},c.getIDs=function(){return{}},window.ht=c,c.useParentDomain=a,window._gaq=window._gaq||[],window._siteid=t,i(o+"//trackcommon.hujiang.com/analytics/ht/ht.min.js?v="+n),e&&i(o+"//trackcommon.hujiang.com/analytics/ht/ht.dsp.min.js?v="+n),i(o+"//track.hujiang.com/log?siteid="+t+"&urlref="+r+"&hj_t="+ +new Date)}(6,!0,!0),$(function(){var e=$("body"),t=$(document),n=$(window),a=e.data();!function(){var t=void 0;if("qq"===a.service&&a.serviceQq)t="tencent://message/?uin="+a.serviceQq,e.on("click","#kefu",function(){return window.open(t,"_self"),!1});else{if("hujiang"!==a.service)return!1;t="http://class.hujiang.com/common/kf.aspx"}e.append('<a href="'+t+'" target="_blank" id="kefu"><i class="icon_kefu"></i><span class="hide_text">我要<br>咨询</span></a>')}(),function(){e.append('<a href="javascript:;" id="class_gotop"><i class="icon_gotop"></i><span class="hide_text">返回<br>顶部</span></a>'),n.scroll(function(){$("#class_gotop").toggle(n.scrollTop()>200)}),e.on("click","#class_gotop",function(t){return $("html,body").animate({scrollTop:0},1),t.preventDefault(),!1})}(),t.on("click",'._class [data-enable="click"], ._class ._btn',function(t){var e=$(t.currentTarget).closest("._class").find("._btn");if(e.hasClass("disabled"))return!1;var a=e.attr("href"),n=e.data("classId"),o=getLogParams(t.currentTarget);return o.productID=n,hjLog("topic_product",o),window.open(a,"_blank"),!1}),t.find("._class ._btn.disabled").closest("._class").addClass("disabled"),$(".hero").each(function(t,e){var a=$(e),o=parseInt(a.data("imageWidth"),10);if(!o)return!0;var i=n.width(),r=Math.round((i-o)/2);a.find("._areas").css("left",r)}),t.on("click","._areas a",function(t){var e=$(t.currentTarget),a=e.closest(".hero, .layer");if(!a.length)return!0;var n=e.attr("href"),o=getLogParams(e);if(o.url=n,hjLog("topic_picture",o),"#"===n.charAt(0)){var i=$(n).offset();return $("html, body").animate({scrollTop:i.top?i.top-40:0},1),!1}});var o=function(t){return $(t.currentTarget).closest("._item").find("._btn").trigger("click")};t.on("click",".coupon ._img",o),t.on("click",".price-coupon ._pic, .price-coupon ._name",o),t.on("click","a[href]",function(e){var t=$(e.currentTarget),n=t.attr("href");if(t.hasClass("disabled"))return!1;if(!n||/^#/.test(n))return!0;if(/^javascript/.test(n)){var jstr=n.substr(11).replace(/[;]+$/g,"");return jstr&&eval("("+jstr+")"),!1}var a=t.closest("[id^=Topic]"),o,r;return t.closest(".class-single, .class-multi").length?!1:(r=getLogParams(t),a.hasClass("banner")?o="topic_banner":(a.hasClass("coupon")||a.hasClass("price-coupon"))&&(o="topic_coupon",r.couponID=a.find("[data-coupon-id]").data("couponId")),o&&(r.url=n,hjLog(o,r)),window.open(n,"_blank"),!1)}),t.on("click",".layer ._close",function(t){return $(t.currentTarget).closest(".layer").remove(),!1}),n.scroll(function(){var t=n.scrollTop()>200?"fadeIn":"fadeOut";$(".layer")[t]()}),t.on("click",'[data-toggle="modal"]',function(t){var e=$(t.currentTarget),a=e.data("target"),n=void 0,o=void 0;return a?(n=$(a),o=n.find("._dialog"),o.find("._title").text(e.text()),n.fadeIn(200),void o.css({marginTop:-o.height()/2-50})):!0}).on("click",'[data-dismiss="modal"]',function(t){$(t.currentTarget).closest(".modal").hide()}),t.on("click",".tab ._item:not(.active)",function(t){var e=$(t.currentTarget).closest(".tab"),a=e.find("._item"),n=e.find("._panel"),o=a.index(t.currentTarget);a.removeClass("active").eq(o).addClass("active"),n.removeClass("active").eq(o).addClass("active"),n.find("img[data-original]").each(function(){var t=this.getAttribute("data-original");t&&this.src!=t&&(this.src=t)})})}),function(){var t=101,e=$("body"),a="__hj-dialog__";$.fn.openModel=function(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=n.hideOthers,i=void 0===o?!0:o;return i&&$.closeModel(),$(this).each(function(){var n=$(this),o=$(".hj-dialog-mask");n.addClass(a),o.length||(o=$('<div class="hj-dialog-mask"></div>'),e.append(o)),o.show(),n.show();var i=n[0].offsetWidth,r=n[0].offsetHeight;n.css({position:"fixed",zIndex:++t,top:"50%",left:"50%",marginLeft:.5*-i,marginTop:.5*-r})}),this},$.closeModel=function(){return $(".hj-dialog-mask").hide(),$("."+a).hide(),!1},$.fn.closeModel=function(){return $(this).hide(),$("."+a+":visible").length||$(".hj-dialog-mask").hide(),this},e.on("click","[model-close],[close-model],[dialog-close]",function(t){$(t.currentTarget).closest("."+a).closeModel()})}();var hjc={config:{login_url:"https://login.hujiang.com/?url=",login_api:"http://pass.hujiang.com/static/js/biz/hjpassport-async.js",login_API_SLD:"//pass",lazy_pic:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBQzJDNkEwNjE4QjkxMUU2QTA1Qzg5QzBCMTBDNjY4NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBQzJDNkEwNzE4QjkxMUU2QTA1Qzg5QzBCMTBDNjY4NyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkFDMkM2QTA0MThCOTExRTZBMDVDODlDMEIxMEM2Njg3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkFDMkM2QTA1MThCOTExRTZBMDVDODlDMEIxMEM2Njg3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Ix/rqAAAAAZQTFRF////AAAAVcLTfgAAAAF0Uk5TAEDm2GYAAAAMSURBVHjaYmAACDAAAAIAAU9tWeEAAAAASUVORK5CYII=",share_js:"http://www.hujiang.com/classzt/js/bd_share_v2.js",form_js:"http://res.hjfile.cn/mkt/zt/hjzt.form-3690685d66970a92.js",form_css:"http://res.hjfile.cn/mkt/zt/form-a545adf671179a81.css",getcoupon_js:"http://res.hjfile.cn/mkt/zt/hjzt.getcoupon-c7145fddaae03e3b.js",lottory_js:"http://res.hjfile.cn/mkt/zt/hjzt.lottery-1bb71910c7825822.js",lottory_css:"http://res.hjfile.cn/mkt/zt/lottory-4aa0ef0adf07705c.css",topicid:server_data.topicid||"",env:function(){var t=location.host.substr(0,2);return{dev:"lo"==t,qa:"qa"==t,yz:"yz"==t}}()},doing:!1,ie7:function(){return-1!=navigator.userAgent.indexOf("MSIE 7")}(),now:function(){return server_data.server_time-288e5}(),query:function(t,e){if(!t||"string"!=typeof t)return"";e||(e=location.href);var a=new RegExp("(^|[?&])"+t+"=(.*?)(&|#|$)","i").exec(e);return a&&a.length>=2?decodeURIComponent(a[2]):""},loadJs:function(t,e){var a=document.createElement("script");a.type="text/javascript",a.src=t,e&&(document.addEventListener?a.addEventListener("load",e,!1):a.onreadystatechange=function(){/loaded|complete/.test(a.readyState)&&(a.onreadystatechange=null,e())}),document.body.appendChild(a)},check:{mobile:function(t){return/^1\d{10}$/.test(t)},tel:function(t){return/(\d{3}[\s\-]?\d{8})|(\d{4}[\s\-]?\d{7})/.test(t)},email:function(t){return/^([a-z0-9][a-z0-9_\-\.]*)@([a-z0-9][a-z0-9\.\-]{0,20})\.([a-z]{2,4})$/i.test(t)},namecn:function(t){return/^[\u4e00-\u9fa5]{2,5}$/.test(t)},nameen:function(t){return/^[a-z]{2,20}(\s[a-z]{1,20})*$/i.test(t)}},top:function(t){return"undefined"==typeof t?$(window).scrollTop():void $(window).scrollTop(t)},cookie:{get:function(t){var e=new RegExp("(^|[^a-z])"+t+"=(.*?)(;|$)","i").exec(document.cookie);return e?decodeURIComponent(e[2]):""}},alert:function(t,e,a,n){hjc.alert_ok=n||hjc.delmodal;var o='<div class="modal" style="display:block;"><div class="_mask"></div><div class="_dialog"><div class="_header"><p class="_title">{0}</p><a class="_close" onclick="hjc.delmodal();"></a></div><div class="_body">{1}</div>'+(a?'<div class="_foot"><a onclick="hjc.alert_ok();">{0}</a></div>'.format(a):"")+"</div></div>";o=o.format(t,e),$(".modal").remove(),$(document.body).append(o),0==$(".modal ._dialog input").length&&$(".modal").on("click",function(t){$(t.target||t.srcElement).hasClass("modal")&&hjc.delmodal()})},delmodal:function(){$(".modal").hide(),setTimeout(function(){$(".modal").remove()},10)},wait:function(t,e){function a(){0==$(".modal input").length&&$(".modal").remove(),$(".modal2,.loading").remove();var e="",a=0==$(".modal").length;a&&(e+='<div class="modal modal2"><div class="_mask"></div>'),e+='<div class="loading"><p>{0}</p></div>'.format(t||"Loading..."),a&&(e+="</div>"),$(a?"body":".modal").append(e)}e?a():setTimeout(function(){hjc.doing&&a()},1e3),hjc.doing=!0},waitok:function(){$(".modal2,.loading").remove(),hjc.doing=!1},getToken:function(){return""},ajax:function(api,data,ispost,func_succ,func_err,_times){_times||(_times=1);var pdata=data||{};pdata.TopicID||(pdata.TopicID=server_data.topicid),pdata.IsPreview||(pdata.IsPreview=server_data.ispreview?"true":"false"),pdata.__r=(new Date).getTime(),$.ajax({url:api,data:pdata,dataType:"json",methed:ispost?"POST":"GET",type:ispost?"POST":"GET",timeout:pdata.timeout||1e4,xhrFields:{withCredentials:!0},success:function(res){if(hjc.waitok(),"string"==typeof res&&"[{".indexOf(res[0])>-1&&(res=eval("("+res+")")),hjc.ajax_res=res,res.success||res.isSuccess)func_succ&&func_succ(res.data);else switch(res.message||""){case"NoLogin":hjc.login();break;default:func_err&&func_err(res.message)}},error:function(t,e,a){3>_times&&!hjc.config.env.dev?hjc.ajax(api,data,ispost,func_succ,func_err,_times+1):(hjc.waitok(),ispost&&hjc.alert("遇到错误啦~",'<p class="_err">网络不是太理想，请稍后重试！</p>'),func_err&&func_err("failed"))}})},lazyload:function(){var t="img[data-original],.lazy",e=$(t).attr("src",hjc.config.lazy_pic);$.fn.lazy=function(){return this.each(function(t,e){"IMG"==e.tagName&&$(e).attr("data-original",e.src).attr("src",hjc.config.lazy_pic)}),e=$(t),this},$.fn.load=function(){return 0==this.length?this:(this.each(function(t,e){var a=$(e),n=a.data("original");return n?("IMG"==e.tagName?n!=e.src&&(e.src=n):a.hasClass("lazy")&&a.css("background-image","url({0})".format(n)).removeClass("lazy"),void a.removeAttr("data-original")):!0}),e=$(t),this)};setInterval(function(){var t=hjc.top(),a=$(window).height()+t+100,n=$("#_000");e.each(function(e,o){var i=$(o).offset(),r=o.offsetHeight;i.top+r>t&&i.top<a&&r>0&&n.push(o)}),n.load()},100)},alertArea:function(t){var e=$("#form-Area"+t);if(e.length>0)return e.openModel();var a=$("#Topic{0}-Area{1}".format(hjc.config.topicid,t));if(0!=a.length){a.addClass("alertarea").css({"margin-top":"-"+a[0].offsetHeight/2+"px"});var n="$('.alertarea').removeClass('alertarea').css('margin-top','0');$(this).remove();",o='<a class="area_close" style="top:{0}px;" onclick="{1}"></a>';o=o.format(a.offset().top+10,n),$(document.body).append(o)}},getAreaId:function(t){var e=$(t).closest("[id^=Topic]").attr("id")||"",a=/[a-z]+(\d+)-[a-z]+(\d+)/i.exec(e);return a&&a[0]?a[2]:0}};hjc.login=function(){window.HJPassport?HJPassport.show("login"):hjc.loadJs(hjc.config.login_api,function(){HJPassport.init({API_SLD:hjc.config.login_API_SLD}),HJPassport.show("login")})},hjc.log=function(t){if(!hjc.config.env.dev&&!hjc.config.env.qa&&!hjc.config.env.yz)return!1;if("object"==typeof t){var e="";for(var a in t)e+="{0}:{1}, ".format(a,t[a]);t=e}var n=$("#dlog");0==n.length&&($("body").append('<div id="dlog" style="position:fixed;z-index:888;left:0;top:0;background:rgba(255,255,255,0.6);"></div>'),n=$("#dlog")),n.append("<p>"+t+"</p>")},String.prototype.format=function(){for(var t=this,e=0;e<arguments.length;e++)t=t.replace(new RegExp("\\{"+e+"\\}","g"),arguments[e]);return t};var hjzt={course:function(){0!=$(".course").length&&($(".course .btn_go").each(function(){var t=$(this),e=t.parent().find(".pic,.title,.desc");e.on("click",function(){$(this).parent().find(".btn_go")[0].click()}),t.hasClass("btn_go_0")&&t.parent().addClass("course_onebtn")}),$(".mark_1,.mark_4").html(function(){return $(this).html().substr(0,4)}),$('.course a[href=""]').removeAttr("href").css("cursor","default"))},course_tab:function(){0!=$(".course_tab").length&&$(".course_tab").each(function(){var t=$(this),e=t.find("a").length;t.find("a").on("click",function(){t.find(".hover").removeClass("hover");var e=$(this).addClass("hover").index(),a=t.parent().find(".course").hide().eq(e).show();a.find("img[data-original]").each(function(){var t=this.getAttribute("data-original");t&&this.src!=t&&(this.src=t)})}).width(100/e+"%").eq(0).addClass("hover")})},coupon:function(){$(".coupon_pay .btn,.coupon_free .btn").each(function(){var t=$(this),e=t.parent().find(".pic,.title");e.on("click",function(){$(this).parent().find(".btn")[0].click()})});var t=$('a[href^="#CP:"]'),e=t.length>0;t.length>0&&t.each(function(){var t=$(this),e=t.attr("href");t.attr("data-getcp",e.substr(4))}).removeAttr("href"),e=e||$("[data-getcp]").length>0,e&&!hjzt.getcoupon&&hjc.loadJs(hjc.config.getcoupon_js)},tab_area:function(){0!=$(".customtab").length&&$(".customtab>div").each(function(){var t=$(this),e=t.find("a"),a=[];e.css({width:100/e.length-.05+"%"}),e.each(function(t,e){var n=$(e).attr("data-areas").split(",");$.each(n,function(t,e){a.push("#Topic{0}-Area{1}".format(server_data.topicid,e))})});var n=$(a.join(",")).hide();e.on("click",function(){var e=$(this),a=e.attr("data-areas").split(","),o=[];$.each(a,function(t,e){o.push("#Topic{0}-Area{1}".format(server_data.topicid,e))}),n.hide(),$(o.join(",")).show(),t.css({"background-image":"url({0})".format(e.data("img"))}),hjc.ie7&&($(".area>div").addClass("a__a"),setTimeout(function(){$(".area>div").removeClass("a__a")},10))}).eq(0).trigger("click")})}};hjzt.init=function(){(hjc.config.env.dev||hjc.config.env.qa)&&(hjc.config.login_API_SLD="//qapass"),hjzt.course(),hjzt.course_tab(),hjzt.coupon(),hjzt.tab_area(),$(".cjBox").length>0&&(insertCSSCode(hjc.config.lottory_css),hjc.loadJs(hjc.config.lottory_js)),window._buildFormDatas&&window._buildFormDatas.length>0&&hjc.loadJs(hjc.config.form_js),hjc.ie7&&($(".price,.old_price").each(function(){var t=document.createElement("before");t.innerHTML="￥",this.insertBefore(t,this.firstChild)}),$(".coupon_free .btn > i").css("margin-top",function(){return this.offsetHeight/2*-1+"px"})),$("._map.lazy").attr("data-original",function(){return $(this).attr("data-original")+"?imageView2/2/q/80"}),hjc.lazyload(),$("body").on("click","[data-log-id]",function(){for(var t=$(this),e=t.parent(),a=/Topic(\d+)-Area(\d+)/i,n=a.exec(e.attr("id"));e.length>0&&!n;)e=e.parent(),n=a.exec(e.attr("id"));var o=t.attr("data-log-params")||"";o&&-1==o.indexOf("topicID")&&n[0]&&(o="{'topicID':'{0}','areaID':'{1}',".format(n[1],n[2])+o.substr(1)),ht.sendCustomEvent(t.data("log-id"),o,server_data.userid)}),setTimeout(function(){server_data.share_desc&&(window.bd_share_config={userid:server_data.userid,slide:!0,pic:server_data.share_img,text:server_data.share_desc},hjc.loadJs(hjc.config.share_js)),server_data.userid||hjc.loadJs(hjc.config.login_api,function(){HJPassport.init({API_SLD:hjc.config.login_API_SLD})})},1e3)},$(hjzt.init);